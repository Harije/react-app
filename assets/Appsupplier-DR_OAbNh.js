import{X as F,r as p,j as e,o as j,p as R,x as B,i as V,B as v,I as w,Y as ee,Z as te,J as le,K as se,$ as ne,a0 as P,s as re}from"./index-Bg9Gd-Mk.js";import{G as l,F as ie,T as ae,D as oe,u as I,w as de,E as ue,a as pe}from"./jspdf.plugin.autotable-C62ySDC9.js";import{T as r,I as ce}from"./TextField-DrCr6fLd.js";import{A as g}from"./Autocomplete-BKTD_cRl.js";import{d as me,T as xe,a as N,b,c as he}from"./TableRow-CsweJJjp.js";import{E as je}from"./Edit-wTQG4UGA.js";import{T as ge}from"./TablePagination-CgySaG-p.js";import{D as be,a as ve,b as fe,c as _e}from"./DialogTitle-Cild9m65.js";import{D as Ce}from"./Drawer-CrLtX86L.js";import{F as Se}from"./FormControl-CEF_MUqX.js";import{S as ye}from"./Select-BTOFfGV5.js";import{M as O}from"./MenuItem-BZ0Bes1g.js";import{S as We}from"./Stack-CbZndAYz.js";import"./useId-CblYdv6j.js";import"./utils-BOIr5jf6.js";import"./useFormControl-BIpaAVtd.js";import"./FormHelperText-cSQn0M_Y.js";import"./Input-BBa8_kQ9.js";import"./Close-BdqVTZbN.js";import"./Popper-CLxdUBp6.js";import"./useControlled-DwjBksQM.js";import"./usePreviousProps-DpKnkwRp.js";import"./Chip-Bxuv7oEj.js";import"./Toolbar-DJcYTIBb.js";import"./Slide-CQBBZdC5.js";import"./dividerClasses-DUtPGmYP.js";const De=()=>{const c=F(),[o,i]=p.useState({supplier_code:"",supplier_name:"",supplier_email:"",supplier_pin_code:"",supplier_mobile:"",supplier_address:""}),[x,d]=p.useState(""),h=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],t=n=>{i({...o,[n.target.name]:n.target.value})},a=async n=>{n.preventDefault(),d("");try{const u=await V.post("http://localhost/swathi-transport/backend/api/supplier/supplier-api.php?action=add",o);u.data.error?d(u.data.error):(alert("supplier added successfully!"),i({supplier_code:"",supplier_name:"",supplier_email:"",supplier_pin_code:"",supplier_mobile:"",supplier_address:""}),c("/master/supplier"))}catch(u){d("Failed to add supplier. Please try again."+u)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Add supplier"}),x&&e.jsx("p",{style:{color:"red"},children:x}),e.jsxs("form",{onSubmit:a,children:[e.jsxs(l,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_name",value:o.supplier_name,onChange:t,label:"Name",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_address",value:o.supplier_address,onChange:t,label:"Address",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:h,getOptionLabel:n=>n.label,onChange:(n,u)=>{console.log("Selected option:",u)},renderInput:n=>e.jsx(r,{...n,label:"Select Country",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:h,getOptionLabel:n=>n.label,onChange:(n,u)=>{console.log("Selected option:",u)},renderInput:n=>e.jsx(r,{...n,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:h,getOptionLabel:n=>n.label,onChange:(n,u)=>{console.log("Selected option:",u)},renderInput:n=>e.jsx(r,{...n,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_postal_code",value:o.supplier_address,onChange:t,label:"Postal Code",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_contact_no",value:o.supplier_email,onChange:t,label:"Conatct No"})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,type:"email",name:"supplier_email",value:o.supplier_pin_code,onChange:t,label:"Email",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_gst_no",value:o.supplier_pin_code,onChange:t,label:"GST No",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_pan_no",value:o.supplier_pin_code,onChange:t,label:"PAN No",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_range",value:o.supplier_pin_code,onChange:t,label:"Range",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_division",value:o.supplier_pin_code,onChange:t,label:"Division",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_Credit_Limit",value:o.supplier_pin_code,onChange:t,label:"Credit_Limit",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,type:"number",name:"supplier_payment_days",value:o.supplier_pin_code,onChange:t,label:"Payment Days",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:h,getOptionLabel:n=>n.label,onChange:(n,u)=>{console.log("Selected option:",u)},renderInput:n=>e.jsx(r,{...n,label:"Select Account Group ",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:h,getOptionLabel:n=>n.label,onChange:(n,u)=>{console.log("Selected option:",u)},renderInput:n=>e.jsx(r,{...n,label:"Select Sub Group ",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(j,{color:"primary",variant:"contained",type:"submit",sx:{mr:2},children:[e.jsx(R,{children:"send"}),e.jsx(B,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>c("/master/supplier"),children:"Back"})]})]})};function we(){const c=F(),[o,i]=p.useState([{id:1,name:"Main supplier",address:"main@example.com",status:"Active"},{id:2,name:"West supplier",address:"west@example.com",status:"Inactive"},{id:3,name:"East supplier",address:"east@example.com",status:"Cancelled"},{id:4,name:"North supplier",address:"north@example.com",status:"Active"},{id:5,name:"South supplier",address:"south@example.com",status:"Inactive"},{id:6,name:"South supplier",address:"south@example.com",status:"Inactive"}]),[x,d]=p.useState(o),[h,t]=p.useState(0),[a,n]=p.useState(5),[u,L]=p.useState(!1),[G,T]=p.useState(!1),[_,$]=p.useState(null),[C,q]=p.useState(""),[S,A]=p.useState(""),[y,k]=p.useState("");p.useEffect(()=>{fetch("/api/supplieres").then(s=>s.json()).then(s=>{i(s),d(s)}).catch(()=>console.log("Using default data"))},[]);const M=(s,m)=>t(m),U=s=>{n(+s.target.value),t(0)},z=()=>T(!0),E=()=>T(!1),J=s=>{$(s),L(!0)},W=()=>{L(!1),q("")},Y=()=>{if(!C.trim())return;console.log(`Deleting supplier: ${_.name} for reason: ${C}`);const s=o.filter(m=>m.id!==_.id);i(s),d(s),W()},H=()=>{let s=o;S.trim()&&(s=s.filter(m=>m.name.toLowerCase().includes(S.toLowerCase()))),y&&(s=s.filter(m=>m.status===y)),d(s),E()},K=()=>{A(""),k(""),d(o)},X=()=>{const s=I.json_to_sheet(x),m=I.book_new();I.book_append_sheet(m,s,"supplieres"),de(m,"supplieres.xlsx")},Z=()=>{const s=new ue;s.text("supplier List",14,10);const m=["supplier","Email","Status"],Q=x.map(D=>[D.name,D.address,D.status]);pe(s,{head:[m],body:Q,startY:20}),s.save("supplieres.pdf")};return e.jsxs(v,{children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx("h2",{children:"supplier List"}),e.jsx(w,{color:"primary",onClick:z,children:e.jsx(ie,{})})]}),e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(j,{variant:"contained",color:"primary",onClick:()=>c("add"),md:6,xs:12,lg:3,children:"Add supplier"}),e.jsx(j,{variant:"contained",color:"success",onClick:X,children:"Export to Excel"}),e.jsx(j,{variant:"contained",color:"secondary",onClick:Z,children:"Export to PDF"})]})]}),e.jsx(ae,{component:ee,children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(N,{children:[e.jsx(b,{align:"center",children:e.jsx("b",{children:"supplier"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Email"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Status"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Edit"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Delete"})})]})}),e.jsx(he,{children:x.slice(h*a,h*a+a).map(s=>e.jsxs(N,{children:[e.jsx(b,{align:"center",children:s.name}),e.jsx(b,{align:"center",children:s.address}),e.jsx(b,{align:"center",children:s.status}),e.jsx(b,{align:"center",children:e.jsx(w,{color:"primary",onClick:()=>c(`/master/supplier/edit/${s.id}`),children:e.jsx(je,{})})}),e.jsx(b,{align:"center",children:e.jsx(w,{color:"error",onClick:()=>J(s),children:e.jsx(oe,{})})})]},s.id))})]})}),e.jsx(ge,{component:"div",count:x.length,page:h,rowsPerPage:a,onPageChange:M,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:U}),e.jsx(v,{mt:2}),e.jsxs(be,{open:u,onClose:W,children:[e.jsx(ve,{children:"Confirm Delete"}),e.jsxs(fe,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("b",{children:_==null?void 0:_.name}),"?"]}),e.jsx(r,{fullWidth:!0,label:"Reason for Delete",value:C,onChange:s=>q(s.target.value),margin:"dense"})]}),e.jsxs(_e,{children:[e.jsx(j,{onClick:W,color:"secondary",children:"Cancel"}),e.jsx(j,{onClick:Y,color:"error",disabled:!C.trim(),children:"Delete"})]})]}),e.jsx(Ce,{anchor:"right",open:G,onClose:E,children:e.jsxs(v,{p:3,width:300,display:"flex",flexDirection:"column",gap:2,children:[e.jsx("h3",{children:"Filter supplieres"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(r,{label:"supplier Name",variant:"outlined",fullWidth:!0,value:S,onChange:s=>A(s.target.value)})}),e.jsx(l,{item:!0,xs:12,md:12,children:e.jsxs(Se,{fullWidth:!0,children:[e.jsx(ce,{children:"Status"}),e.jsxs(ye,{value:y,onChange:s=>k(s.target.value),label:"Status",children:[e.jsx(O,{value:"Active",children:"Active"}),e.jsx(O,{value:"Inactive",children:"Inactive"}),e.jsx(O,{value:"Cancelled",children:"Cancelled"})]})]})})]}),e.jsxs(v,{mt:2,display:"flex",justifyContent:"space-between",children:[e.jsx(j,{variant:"outlined",color:"secondary",onClick:K,children:"Reset"}),e.jsx(j,{variant:"contained",onClick:H,children:"Apply Filter"})]})]})})]})}const f=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],Pe=[{label:"Active",value:"1"},{label:"InActive",value:"2"}],Ie=()=>{const{id:c}=te(),o=F(),[i,x]=p.useState({username:"",firstName:"",email:"",creditCard:"",mobile:"",password:"",confirmPassword:"",supplier_option:null});p.useEffect(()=>{fetch(`/api/supplieres/${c}`).then(t=>t.json()).then(t=>{const a=f.find(n=>n.value===t.supplier_option);x({...t,supplier_option:a||null})})},[c]);const d=t=>{x({...i,[t.target.name]:t.target.value})},h=t=>{var n;t.preventDefault();const a={...i,supplier_option:((n=i.supplier_option)==null?void 0:n.value)||""};fetch(`/api/supplieres/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(()=>o("/master/supplier"))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit supplier"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs(l,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_name",value:i.supplier_name,onChange:d,label:"Name",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_address",value:i.supplier_address,onChange:d,label:"Address",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Country",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_postal_code",value:i.supplier_address,onChange:d,label:"Postal Code",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_contact_no",value:i.supplier_email,onChange:d,label:"Conatct No"})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,type:"email",name:"supplier_email",value:i.supplier_pin_code,onChange:d,label:"Email",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_gst_no",value:i.supplier_pin_code,onChange:d,label:"GST No",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_pan_no",value:i.supplier_pin_code,onChange:d,label:"PAN No",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_range",value:i.supplier_pin_code,onChange:d,label:"Range",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_division",value:i.supplier_pin_code,onChange:d,label:"Division",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"supplier_Credit_Limit",value:i.supplier_pin_code,onChange:d,label:"Credit_Limit",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,type:"number",name:"supplier_payment_days",value:i.supplier_pin_code,onChange:d,label:"Payment Days",required:!0})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Account Group ",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Sub Group ",variant:"outlined",fullWidth:!0})})}),e.jsx(l,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{options:Pe,getOptionLabel:t=>t.label,value:i.supplier_option,onChange:(t,a)=>x({...i,supplier_option:a}),renderInput:t=>e.jsx(r,{...t,label:"Select Status",variant:"outlined",fullWidth:!0,required:!0})})})]}),e.jsxs(j,{variant:"contained",color:"success",type:"submit",sx:{mr:2},children:[e.jsx(R,{children:"forward"}),e.jsx(B,{sx:{pl:1,textTransform:"capitalize"},children:"Update"})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>o("/master/supplier"),children:"Back"})]})]})},Oe=re("div")(({theme:c})=>({margin:"30px",[c.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"15px",[c.breakpoints.down("sm")]:{marginBottom:"16px"}}}));function st(){return e.jsxs(Oe,{children:[e.jsx(v,{className:"breadcrumb",children:e.jsx(le,{routeSegments:[{name:"Master",path:"/master"},{name:"supplier",path:"/master/supplier"}]})}),e.jsx(We,{spacing:3,children:e.jsx(se,{children:e.jsxs(ne,{children:[e.jsx(P,{path:"/",element:e.jsx(we,{})}),e.jsx(P,{path:"add",element:e.jsx(De,{})}),e.jsx(P,{path:"edit/:id",element:e.jsx(Ie,{})})]})})})]})}export{st as default};
