import{X as k,r as o,j as e,o as h,p as L,x as q,i as V,B as C,I as S,Y as ee,Z as ne,J as ae,K as te,$ as se,a0 as D,s as re}from"./index-Bg9Gd-Mk.js";import{G as s,F as oe,T as le,D as ie,u as w,w as ce,E as de,a as ue}from"./jspdf.plugin.autotable-C62ySDC9.js";import{T as d,I as me}from"./TextField-DrCr6fLd.js";import{A as P}from"./Autocomplete-BKTD_cRl.js";import{d as pe,T as he,a as R,b as x,c as xe}from"./TableRow-CsweJJjp.js";import{E as je}from"./Edit-wTQG4UGA.js";import{T as Ce}from"./TablePagination-CgySaG-p.js";import{D as ye,a as ge,b as fe,c as be}from"./DialogTitle-Cild9m65.js";import{D as Ie}from"./Drawer-CrLtX86L.js";import{F as ve}from"./FormControl-CEF_MUqX.js";import{S as _e}from"./Select-BTOFfGV5.js";import{M as F}from"./MenuItem-BZ0Bes1g.js";import{S as Se}from"./Stack-CbZndAYz.js";import"./useId-CblYdv6j.js";import"./utils-BOIr5jf6.js";import"./useFormControl-BIpaAVtd.js";import"./FormHelperText-cSQn0M_Y.js";import"./Input-BBa8_kQ9.js";import"./Close-BdqVTZbN.js";import"./Popper-CLxdUBp6.js";import"./useControlled-DwjBksQM.js";import"./usePreviousProps-DpKnkwRp.js";import"./Chip-Bxuv7oEj.js";import"./Toolbar-DJcYTIBb.js";import"./Slide-CQBBZdC5.js";import"./dividerClasses-DUtPGmYP.js";const De=()=>{const u=k(),[l,r]=o.useState({InsuranceCompany_code:"",InsuranceCompany_name:"",InsuranceCompany_email:"",InsuranceCompany_pin_code:"",InsuranceCompany_mobile:"",InsuranceCompany_address:""}),[p,c]=o.useState(""),y=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],a=t=>{r({...l,[t.target.name]:t.target.value})},i=async t=>{t.preventDefault(),c("");try{const j=await V.post("http://localhost/swathi-transport/backend/api/InsuranceCompany/InsuranceCompany-api.php?action=add",l);j.data.error?c(j.data.error):(alert("InsuranceCompany added successfully!"),r({InsuranceCompany_code:"",InsuranceCompany_name:"",InsuranceCompany_email:"",InsuranceCompany_pin_code:"",InsuranceCompany_mobile:"",InsuranceCompany_address:""}),u("/master/InsuranceCompany"))}catch(j){c("Failed to add InsuranceCompany. Please try again."+j)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Add InsuranceCompany"}),p&&e.jsx("p",{style:{color:"red"},children:p}),e.jsxs("form",{onSubmit:i,children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_name",value:l.InsuranceCompany_code,onChange:a,label:"Company Name",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_contactperson",value:l.InsuranceCompany_name,onChange:a,label:"Contact Person",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_Branch",value:l.InsuranceCompany_email,onChange:a,label:"Branch",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_contactno",value:l.InsuranceCompany_pin_code,onChange:a,label:"Contact No.",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(P,{options:y,getOptionLabel:t=>t.label,onChange:(t,j)=>{console.log("Selected option:",j)},renderInput:t=>e.jsx(d,{...t,label:"Select Account Group",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(h,{color:"primary",variant:"contained",type:"submit",sx:{mr:2},children:[e.jsx(L,{children:"send"}),e.jsx(q,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]}),e.jsx(h,{variant:"contained",color:"secondary",onClick:()=>u("/master/insurance-company"),children:"Back"})]})]})};function we(){const u=k(),[l,r]=o.useState([{id:1,name:"Main InsuranceCompany",address:"main@example.com",status:"Active"},{id:2,name:"West InsuranceCompany",address:"west@example.com",status:"Inactive"},{id:3,name:"East InsuranceCompany",address:"east@example.com",status:"Cancelled"},{id:4,name:"North InsuranceCompany",address:"north@example.com",status:"Active"},{id:5,name:"South InsuranceCompany",address:"south@example.com",status:"Inactive"},{id:6,name:"South InsuranceCompany",address:"south@example.com",status:"Inactive"}]),[p,c]=o.useState(l),[y,a]=o.useState(0),[i,t]=o.useState(5),[j,T]=o.useState(!1),[$,E]=o.useState(!1),[g,G]=o.useState(null),[f,A]=o.useState(""),[b,O]=o.useState(""),[I,W]=o.useState("");o.useEffect(()=>{fetch("/api/InsuranceCompanyes").then(n=>n.json()).then(n=>{r(n),c(n)}).catch(()=>console.log("Using default data"))},[]);const M=(n,m)=>a(m),U=n=>{t(+n.target.value),a(0)},z=()=>E(!0),B=()=>E(!1),J=n=>{G(n),T(!0)},v=()=>{T(!1),A("")},Y=()=>{if(!f.trim())return;console.log(`Deleting InsuranceCompany: ${g.name} for reason: ${f}`);const n=l.filter(m=>m.id!==g.id);r(n),c(n),v()},H=()=>{let n=l;b.trim()&&(n=n.filter(m=>m.name.toLowerCase().includes(b.toLowerCase()))),I&&(n=n.filter(m=>m.status===I)),c(n),B()},K=()=>{O(""),W(""),c(l)},X=()=>{const n=w.json_to_sheet(p),m=w.book_new();w.book_append_sheet(m,n,"InsuranceCompanyes"),ce(m,"InsuranceCompanyes.xlsx")},Z=()=>{const n=new de;n.text("InsuranceCompany List",14,10);const m=["InsuranceCompany","Email","Status"],Q=p.map(_=>[_.name,_.address,_.status]);ue(n,{head:[m],body:Q,startY:20}),n.save("InsuranceCompanyes.pdf")};return e.jsxs(C,{children:[e.jsxs(C,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(C,{display:"flex",alignItems:"center",gap:1,children:[e.jsx("h2",{children:"InsuranceCompany List"}),e.jsx(S,{color:"primary",onClick:z,children:e.jsx(oe,{})})]}),e.jsxs(C,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(h,{variant:"contained",color:"primary",onClick:()=>u("add"),md:6,xs:12,lg:3,children:"Add InsuranceCompany"}),e.jsx(h,{variant:"contained",color:"success",onClick:X,children:"Export to Excel"}),e.jsx(h,{variant:"contained",color:"secondary",onClick:Z,children:"Export to PDF"})]})]}),e.jsx(le,{component:ee,children:e.jsxs(pe,{children:[e.jsx(he,{children:e.jsxs(R,{children:[e.jsx(x,{align:"center",children:e.jsx("b",{children:"InsuranceCompany"})}),e.jsx(x,{align:"center",children:e.jsx("b",{children:"Email"})}),e.jsx(x,{align:"center",children:e.jsx("b",{children:"Status"})}),e.jsx(x,{align:"center",children:e.jsx("b",{children:"Edit"})}),e.jsx(x,{align:"center",children:e.jsx("b",{children:"Delete"})})]})}),e.jsx(xe,{children:p.slice(y*i,y*i+i).map(n=>e.jsxs(R,{children:[e.jsx(x,{align:"center",children:n.name}),e.jsx(x,{align:"center",children:n.address}),e.jsx(x,{align:"center",children:n.status}),e.jsx(x,{align:"center",children:e.jsx(S,{color:"primary",onClick:()=>u(`/master/insurance-company/edit/${n.id}`),children:e.jsx(je,{})})}),e.jsx(x,{align:"center",children:e.jsx(S,{color:"error",onClick:()=>J(n),children:e.jsx(ie,{})})})]},n.id))})]})}),e.jsx(Ce,{component:"div",count:p.length,page:y,rowsPerPage:i,onPageChange:M,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:U}),e.jsx(C,{mt:2}),e.jsxs(ye,{open:j,onClose:v,children:[e.jsx(ge,{children:"Confirm Delete"}),e.jsxs(fe,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("b",{children:g==null?void 0:g.name}),"?"]}),e.jsx(d,{fullWidth:!0,label:"Reason for Delete",value:f,onChange:n=>A(n.target.value),margin:"dense"})]}),e.jsxs(be,{children:[e.jsx(h,{onClick:v,color:"secondary",children:"Cancel"}),e.jsx(h,{onClick:Y,color:"error",disabled:!f.trim(),children:"Delete"})]})]}),e.jsx(Ie,{anchor:"right",open:$,onClose:B,children:e.jsxs(C,{p:3,width:300,display:"flex",flexDirection:"column",gap:2,children:[e.jsx("h3",{children:"Filter InsuranceCompanyes"}),e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(d,{label:"InsuranceCompany Name",variant:"outlined",fullWidth:!0,value:b,onChange:n=>O(n.target.value)})}),e.jsx(s,{item:!0,xs:12,md:12,children:e.jsxs(ve,{fullWidth:!0,children:[e.jsx(me,{children:"Status"}),e.jsxs(_e,{value:I,onChange:n=>W(n.target.value),label:"Status",children:[e.jsx(F,{value:"Active",children:"Active"}),e.jsx(F,{value:"Inactive",children:"Inactive"}),e.jsx(F,{value:"Cancelled",children:"Cancelled"})]})]})})]}),e.jsxs(C,{mt:2,display:"flex",justifyContent:"space-between",children:[e.jsx(h,{variant:"outlined",color:"secondary",onClick:K,children:"Reset"}),e.jsx(h,{variant:"contained",onClick:H,children:"Apply Filter"})]})]})})]})}const N=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],Fe=[{label:"Active",value:"1"},{label:"InActive",value:"2"}],Pe=()=>{const{id:u}=ne(),l=k(),[r,p]=o.useState({username:"",firstName:"",email:"",creditCard:"",mobile:"",password:"",confirmPassword:"",InsuranceCompany_option:null});o.useEffect(()=>{fetch(`/api/InsuranceCompanyes/${u}`).then(a=>a.json()).then(a=>{const i=N.find(t=>t.value===a.InsuranceCompany_option);p({...a,InsuranceCompany_option:i||null})})},[u]);const c=a=>{p({...r,[a.target.name]:a.target.value})},y=a=>{var t;a.preventDefault();const i={...r,InsuranceCompany_option:((t=r.InsuranceCompany_option)==null?void 0:t.value)||""};fetch(`/api/InsuranceCompanyes/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(()=>l("/master/InsuranceCompany"))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit InsuranceCompany"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_name",value:r.InsuranceCompany_code,onChange:c,label:"Company Name",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_contactperson",value:r.InsuranceCompany_name,onChange:c,label:"Contact Person",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_Branch",value:r.InsuranceCompany_email,onChange:c,label:"Branch",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(d,{fullWidth:!0,name:"insurancecompany_contactno",value:r.InsuranceCompany_pin_code,onChange:c,label:"Contact No.",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(P,{options:N,getOptionLabel:a=>a.label,onChange:(a,i)=>{console.log("Selected option:",i)},renderInput:a=>e.jsx(d,{...a,label:"Select Account Group",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(P,{options:Fe,getOptionLabel:a=>a.label,value:r.InsuranceCompany_option,onChange:(a,i)=>p({...r,InsuranceCompany_option:i}),renderInput:a=>e.jsx(d,{...a,label:"Select Status",variant:"outlined",fullWidth:!0,required:!0})})})]}),e.jsxs(h,{variant:"contained",color:"success",type:"submit",sx:{mr:2},children:[e.jsx(L,{children:"forward"}),e.jsx(q,{sx:{pl:1,textTransform:"capitalize"},children:"Update"})]}),e.jsx(h,{variant:"contained",color:"secondary",onClick:()=>l("/master/insurance-company"),children:"Back"})]})]})},ke=re("div")(({theme:u})=>({margin:"30px",[u.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"15px",[u.breakpoints.down("sm")]:{marginBottom:"16px"}}}));function tn(){return e.jsxs(ke,{children:[e.jsx(C,{className:"breadcrumb",children:e.jsx(ae,{routeSegments:[{name:"Master",path:"/master"},{name:"Insurance-Company",path:"/master/Insurance-Company"}]})}),e.jsx(Se,{spacing:3,children:e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(D,{path:"/",element:e.jsx(we,{})}),e.jsx(D,{path:"add",element:e.jsx(De,{})}),e.jsx(D,{path:"edit/:id",element:e.jsx(Pe,{})})]})})})]})}export{tn as default};
