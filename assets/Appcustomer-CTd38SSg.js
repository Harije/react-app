import{X as L,r as u,j as e,o as j,p as R,x as B,i as V,Z as ee,B as v,I,Y as te,J as se,K as ne,$ as le,a0 as w,s as re}from"./index-Bg9Gd-Mk.js";import{G as n,F as ae,T as oe,D as ie,u as O,w as ce,E as de,a as ue}from"./jspdf.plugin.autotable-C62ySDC9.js";import{T as r,I as me}from"./TextField-DrCr6fLd.js";import{A as m}from"./Autocomplete-BKTD_cRl.js";import{d as xe,T as he,a as N,b,c as pe}from"./TableRow-CsweJJjp.js";import{E as je}from"./Edit-wTQG4UGA.js";import{T as ge}from"./TablePagination-CgySaG-p.js";import{D as be,a as fe,b as ve,c as Ce}from"./DialogTitle-Cild9m65.js";import{D as _e}from"./Drawer-CrLtX86L.js";import{F as Se}from"./FormControl-CEF_MUqX.js";import{S as ye}from"./Select-BTOFfGV5.js";import{M as P}from"./MenuItem-BZ0Bes1g.js";import{S as We}from"./Stack-CbZndAYz.js";import"./useId-CblYdv6j.js";import"./utils-BOIr5jf6.js";import"./useFormControl-BIpaAVtd.js";import"./FormHelperText-cSQn0M_Y.js";import"./Input-BBa8_kQ9.js";import"./Close-BdqVTZbN.js";import"./Popper-CLxdUBp6.js";import"./useControlled-DwjBksQM.js";import"./usePreviousProps-DpKnkwRp.js";import"./Chip-Bxuv7oEj.js";import"./Toolbar-DJcYTIBb.js";import"./Slide-CQBBZdC5.js";import"./dividerClasses-DUtPGmYP.js";const De=()=>{const h=L(),[i,c]=u.useState({customer_code:"",customer_name:"",customer_email:"",customer_pin_code:"",customer_mobile:"",customer_address:""}),[g,d]=u.useState(""),x=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],t=s=>{c({...i,[s.target.name]:s.target.value})},a=async s=>{s.preventDefault(),d("");try{const o=await V.post("http://localhost/swathi-transport/backend/api/customer/customer-api.php?action=add",i);o.data.error?d(o.data.error):(alert("customer added successfully!"),c({customer_code:"",customer_name:"",customer_email:"",customer_pin_code:"",customer_mobile:"",customer_address:""}),h("/master/customer"))}catch(o){d("Failed to add customer. Please try again."+o)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Add customer"}),g&&e.jsx("p",{style:{color:"red"},children:g}),e.jsxs("form",{onSubmit:a,children:[e.jsxs(n,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_name",value:i.customer_name,onChange:t,label:"Name",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_Address",value:i.customer_Address,onChange:t,label:"Address",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Select Country",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_conatct",value:i.customer_conatct,onChange:t,label:"Contact",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,type:"email",name:"customer_email",value:i.customer_email,onChange:t,label:"Email"})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_pan",value:i.customer_pan,onChange:t,label:"PAN",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_gst_no",value:i.customer_gst_no,onChange:t,label:"GST No.",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_credit_limit",value:i.customer_credit_limit,onChange:t,label:"Credit Limit",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_payment_days",value:i.customer_payment_days,onChange:t,label:"Payment Days",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Loads",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Account Group",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Sub Group",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:x,getOptionLabel:s=>s.label,onChange:(s,o)=>{console.log("Selected option:",o)},renderInput:s=>e.jsx(r,{...s,label:"Incharge",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_place",value:i.customer_place,onChange:t,label:"Customer Place",required:!0})})]}),e.jsxs(j,{color:"primary",variant:"contained",type:"submit",sx:{mr:2},children:[e.jsx(R,{children:"send"}),e.jsx(B,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>h("/master/customer"),children:"Back"})]})]})},f=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],Ie=[{label:"Active",value:"1"},{label:"InActive",value:"2"}],we=()=>{const{id:h}=ee(),i=L(),[c,g]=u.useState({username:"",firstName:"",email:"",creditCard:"",mobile:"",password:"",confirmPassword:"",customer_option:null});u.useEffect(()=>{fetch(`/api/customeres/${h}`).then(t=>t.json()).then(t=>{const a=f.find(s=>s.value===t.customer_option);g({...t,customer_option:a||null})})},[h]);const d=t=>{g({...c,[t.target.name]:t.target.value})},x=t=>{var s;t.preventDefault();const a={...c,customer_option:((s=c.customer_option)==null?void 0:s.value)||""};fetch(`/api/customeres/${h}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(()=>i("/master/customer"))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit customer"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs(n,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_name",value:c.customer_name,onChange:d,label:"Name",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_Address",value:c.customer_Address,onChange:d,label:"Address",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Country",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_conatct",value:c.customer_conatct,onChange:d,label:"Contact",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,type:"email",name:"customer_email",value:c.customer_email,onChange:d,label:"Email"})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_pan",value:c.customer_pan,onChange:d,label:"PAN",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_gst_no",value:c.customer_gst_no,onChange:d,label:"GST No.",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_credit_limit",value:c.customer_credit_limit,onChange:d,label:"Credit Limit",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_payment_days",value:c.customer_payment_days,onChange:d,label:"Payment Days",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Loads",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Account Group",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Sub Group",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Incharge",variant:"outlined",fullWidth:!0})})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(r,{fullWidth:!0,name:"customer_place",value:c.customer_place,onChange:d,label:"Customer Place",required:!0})}),e.jsx(n,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:Ie,getOptionLabel:t=>t.label,onChange:(t,a)=>{console.log("Selected option:",a)},renderInput:t=>e.jsx(r,{...t,label:"Select Status",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(j,{variant:"contained",color:"success",type:"submit",sx:{mr:2},children:[e.jsx(R,{children:"forward"}),e.jsx(B,{sx:{pl:1,textTransform:"capitalize"},children:"Update"})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>i("/master/customer"),children:"Back"})]})]})};function Oe(){const h=L(),[i,c]=u.useState([{id:1,name:"Main customer",address:"main@example.com",status:"Active"},{id:2,name:"West customer",address:"west@example.com",status:"Inactive"},{id:3,name:"East customer",address:"east@example.com",status:"Cancelled"},{id:4,name:"North customer",address:"north@example.com",status:"Active"},{id:5,name:"South customer",address:"south@example.com",status:"Inactive"},{id:6,name:"South customer",address:"south@example.com",status:"Inactive"}]),[g,d]=u.useState(i),[x,t]=u.useState(0),[a,s]=u.useState(5),[o,A]=u.useState(!1),[G,F]=u.useState(!1),[C,$]=u.useState(null),[_,T]=u.useState(""),[S,k]=u.useState(""),[y,E]=u.useState("");u.useEffect(()=>{fetch("/api/customeres").then(l=>l.json()).then(l=>{c(l),d(l)}).catch(()=>console.log("Using default data"))},[]);const M=(l,p)=>t(p),U=l=>{s(+l.target.value),t(0)},z=()=>F(!0),q=()=>F(!1),J=l=>{$(l),A(!0)},W=()=>{A(!1),T("")},Y=()=>{if(!_.trim())return;console.log(`Deleting customer: ${C.name} for reason: ${_}`);const l=i.filter(p=>p.id!==C.id);c(l),d(l),W()},H=()=>{let l=i;S.trim()&&(l=l.filter(p=>p.name.toLowerCase().includes(S.toLowerCase()))),y&&(l=l.filter(p=>p.status===y)),d(l),q()},K=()=>{k(""),E(""),d(i)},X=()=>{const l=O.json_to_sheet(g),p=O.book_new();O.book_append_sheet(p,l,"customeres"),ce(p,"customeres.xlsx")},Z=()=>{const l=new de;l.text("customer List",14,10);const p=["customer","Email","Status"],Q=g.map(D=>[D.name,D.address,D.status]);ue(l,{head:[p],body:Q,startY:20}),l.save("customeres.pdf")};return e.jsxs(v,{children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx("h2",{children:"Customer List"}),e.jsx(I,{color:"primary",onClick:z,children:e.jsx(ae,{})})]}),e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(j,{variant:"contained",color:"primary",onClick:()=>h("add"),md:6,xs:12,lg:3,children:"Add customer"}),e.jsx(j,{variant:"contained",color:"success",onClick:X,children:"Export to Excel"}),e.jsx(j,{variant:"contained",color:"secondary",onClick:Z,children:"Export to PDF"})]})]}),e.jsx(oe,{component:te,children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(N,{children:[e.jsx(b,{align:"center",children:e.jsx("b",{children:"customer"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Email"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Status"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Edit"})}),e.jsx(b,{align:"center",children:e.jsx("b",{children:"Delete"})})]})}),e.jsx(pe,{children:g.slice(x*a,x*a+a).map(l=>e.jsxs(N,{children:[e.jsx(b,{align:"center",children:l.name}),e.jsx(b,{align:"center",children:l.address}),e.jsx(b,{align:"center",children:l.status}),e.jsx(b,{align:"center",children:e.jsx(I,{color:"primary",onClick:()=>h(`/master/customer/edit/${l.id}`),children:e.jsx(je,{})})}),e.jsx(b,{align:"center",children:e.jsx(I,{color:"error",onClick:()=>J(l),children:e.jsx(ie,{})})})]},l.id))})]})}),e.jsx(ge,{component:"div",count:g.length,page:x,rowsPerPage:a,onPageChange:M,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:U}),e.jsx(v,{mt:2}),e.jsxs(be,{open:o,onClose:W,children:[e.jsx(fe,{children:"Confirm Delete"}),e.jsxs(ve,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("b",{children:C==null?void 0:C.name}),"?"]}),e.jsx(r,{fullWidth:!0,label:"Reason for Delete",value:_,onChange:l=>T(l.target.value),margin:"dense"})]}),e.jsxs(Ce,{children:[e.jsx(j,{onClick:W,color:"secondary",children:"Cancel"}),e.jsx(j,{onClick:Y,color:"error",disabled:!_.trim(),children:"Delete"})]})]}),e.jsx(_e,{anchor:"right",open:G,onClose:q,children:e.jsxs(v,{p:3,width:300,display:"flex",flexDirection:"column",gap:2,children:[e.jsx("h3",{children:"Filter customeres"}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(r,{label:"customer Name",variant:"outlined",fullWidth:!0,value:S,onChange:l=>k(l.target.value)})}),e.jsx(n,{item:!0,xs:12,md:12,children:e.jsxs(Se,{fullWidth:!0,children:[e.jsx(me,{children:"Status"}),e.jsxs(ye,{value:y,onChange:l=>E(l.target.value),label:"Status",children:[e.jsx(P,{value:"Active",children:"Active"}),e.jsx(P,{value:"Inactive",children:"Inactive"}),e.jsx(P,{value:"Cancelled",children:"Cancelled"})]})]})})]}),e.jsxs(v,{mt:2,display:"flex",justifyContent:"space-between",children:[e.jsx(j,{variant:"outlined",color:"secondary",onClick:K,children:"Reset"}),e.jsx(j,{variant:"contained",onClick:H,children:"Apply Filter"})]})]})})]})}const Pe=re("div")(({theme:h})=>({margin:"30px",[h.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"15px",[h.breakpoints.down("sm")]:{marginBottom:"16px"}}}));function nt(){return e.jsxs(Pe,{children:[e.jsx(v,{className:"breadcrumb",children:e.jsx(se,{routeSegments:[{name:"Master",path:"/master"},{name:"Customer",path:"/master/customer"}]})}),e.jsx(We,{spacing:3,children:e.jsx(ne,{children:e.jsxs(le,{children:[e.jsx(w,{path:"/",element:e.jsx(Oe,{})}),e.jsx(w,{path:"add",element:e.jsx(De,{})}),e.jsx(w,{path:"edit/:id",element:e.jsx(we,{})})]})})})]})}export{nt as default};
