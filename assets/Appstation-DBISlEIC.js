import{X as T,r as i,j as e,o as d,p as N,x as $,i as V,Z as ee,B as b,I as w,Y as te,J as se,K as ne,$ as ae,a0 as F,s as ie}from"./index-Bg9Gd-Mk.js";import{G as r,F as oe,T as le,D as re,u as P,w as ce,E as de,a as me}from"./jspdf.plugin.autotable-C62ySDC9.js";import{T as j,I as ue}from"./TextField-DrCr6fLd.js";import{A as v}from"./Autocomplete-BKTD_cRl.js";import{d as he,T as xe,a as B,b as p,c as pe}from"./TableRow-CsweJJjp.js";import{E as je}from"./Edit-wTQG4UGA.js";import{T as ge}from"./TablePagination-CgySaG-p.js";import{D as be,a as fe,b as ve,c as Ce}from"./DialogTitle-Cild9m65.js";import{D as Se}from"./Drawer-CrLtX86L.js";import{F as ye}from"./FormControl-CEF_MUqX.js";import{S as De}from"./Select-BTOFfGV5.js";import{M as k}from"./MenuItem-BZ0Bes1g.js";import{S as _e}from"./Stack-CbZndAYz.js";import"./useId-CblYdv6j.js";import"./utils-BOIr5jf6.js";import"./useFormControl-BIpaAVtd.js";import"./FormHelperText-cSQn0M_Y.js";import"./Input-BBa8_kQ9.js";import"./Close-BdqVTZbN.js";import"./Popper-CLxdUBp6.js";import"./useControlled-DwjBksQM.js";import"./usePreviousProps-DpKnkwRp.js";import"./Chip-Bxuv7oEj.js";import"./Toolbar-DJcYTIBb.js";import"./Slide-CQBBZdC5.js";import"./dividerClasses-DUtPGmYP.js";const we=()=>{const o=T(),[c,m]=i.useState({station_code:"",station_name:"",station_email:"",station_pin_code:"",station_mobile:"",station_address:""}),[u,h]=i.useState(""),g=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],s=n=>{m({...c,[n.target.name]:n.target.value})},a=async n=>{n.preventDefault(),h("");try{const x=await V.post("http://localhost/swathi-transport/backend/api/station/station-api.php?action=add",c);x.data.error?h(x.data.error):(alert("station added successfully!"),m({station_code:"",station_name:"",station_email:"",station_pin_code:"",station_mobile:"",station_address:""}),o("/master/station"))}catch(x){h("Failed to add station. Please try again."+x)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Add station"}),u&&e.jsx("p",{style:{color:"red"},children:u}),e.jsxs("form",{onSubmit:a,children:[e.jsxs(r,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(j,{fullWidth:!0,name:"station_name",value:c.station_name,onChange:s,label:"Name",required:!0})}),e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(v,{options:g,getOptionLabel:n=>n.label,onChange:(n,x)=>{console.log("Selected option:",x)},renderInput:n=>e.jsx(j,{...n,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(v,{options:g,getOptionLabel:n=>n.label,onChange:(n,x)=>{console.log("Selected option:",x)},renderInput:n=>e.jsx(j,{...n,label:"Select City",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(d,{color:"primary",variant:"contained",type:"submit",sx:{mr:2},children:[e.jsx(N,{children:"send"}),e.jsx($,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]}),e.jsx(d,{variant:"contained",color:"secondary",onClick:()=>o("/master/station"),children:"Back"})]})]})},I=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],Fe=[{label:"Active",value:"1"},{label:"InActive",value:"2"}],Pe=()=>{const{id:o}=ee(),c=T(),[m,u]=i.useState({username:"",firstName:"",email:"",creditCard:"",mobile:"",password:"",confirmPassword:"",station_option:null});i.useEffect(()=>{fetch(`/api/stationes/${o}`).then(s=>s.json()).then(s=>{const a=I.find(n=>n.value===s.station_option);u({...s,station_option:a||null})})},[o]);const h=s=>{u({...m,[s.target.name]:s.target.value})},g=s=>{var n;s.preventDefault();const a={...m,station_option:((n=m.station_option)==null?void 0:n.value)||""};fetch(`/api/stationes/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(()=>c("/master/station"))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit station"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs(r,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(j,{fullWidth:!0,name:"station_name",value:m.station_name,onChange:h,label:"Name",required:!0})}),e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(v,{options:I,getOptionLabel:s=>s.label,onChange:(s,a)=>{console.log("Selected option:",a)},renderInput:s=>e.jsx(j,{...s,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(v,{options:I,getOptionLabel:s=>s.label,onChange:(s,a)=>{console.log("Selected option:",a)},renderInput:s=>e.jsx(j,{...s,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(r,{item:!0,md:6,xs:12,lg:3,children:e.jsx(v,{options:Fe,getOptionLabel:s=>s.label,onChange:(s,a)=>{console.log("Selected option:",a)},renderInput:s=>e.jsx(j,{...s,label:"Select Status",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(d,{variant:"contained",color:"success",type:"submit",sx:{mr:2},children:[e.jsx(N,{children:"forward"}),e.jsx($,{sx:{pl:1,textTransform:"capitalize"},children:"Update"})]}),e.jsx(d,{variant:"contained",color:"secondary",onClick:()=>c("/master/station"),children:"Back"})]})]})};function ke(){const o=T(),[c,m]=i.useState([{id:1,name:"Main station",address:"main@example.com",status:"Active"},{id:2,name:"West station",address:"west@example.com",status:"Inactive"},{id:3,name:"East station",address:"east@example.com",status:"Cancelled"},{id:4,name:"North station",address:"north@example.com",status:"Active"},{id:5,name:"South station",address:"south@example.com",status:"Inactive"},{id:6,name:"South station",address:"south@example.com",status:"Inactive"}]),[u,h]=i.useState(c),[g,s]=i.useState(0),[a,n]=i.useState(5),[x,E]=i.useState(!1),[M,O]=i.useState(!1),[f,U]=i.useState(null),[C,A]=i.useState(""),[S,R]=i.useState(""),[y,L]=i.useState("");i.useEffect(()=>{fetch("/api/stationes").then(t=>t.json()).then(t=>{m(t),h(t)}).catch(()=>console.log("Using default data"))},[]);const q=(t,l)=>s(l),z=t=>{n(+t.target.value),s(0)},G=()=>O(!0),W=()=>O(!1),J=t=>{U(t),E(!0)},D=()=>{E(!1),A("")},Y=()=>{if(!C.trim())return;console.log(`Deleting station: ${f.name} for reason: ${C}`);const t=c.filter(l=>l.id!==f.id);m(t),h(t),D()},H=()=>{let t=c;S.trim()&&(t=t.filter(l=>l.name.toLowerCase().includes(S.toLowerCase()))),y&&(t=t.filter(l=>l.status===y)),h(t),W()},K=()=>{R(""),L(""),h(c)},X=()=>{const t=P.json_to_sheet(u),l=P.book_new();P.book_append_sheet(l,t,"stationes"),ce(l,"stationes.xlsx")},Z=()=>{const t=new de;t.text("station List",14,10);const l=["station","Email","Status"],Q=u.map(_=>[_.name,_.address,_.status]);me(t,{head:[l],body:Q,startY:20}),t.save("stationes.pdf")};return e.jsxs(b,{children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,children:[e.jsx("h2",{children:"station List"}),e.jsx(w,{color:"primary",onClick:G,children:e.jsx(oe,{})})]}),e.jsxs(b,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(d,{variant:"contained",color:"primary",onClick:()=>o("add"),md:6,xs:12,lg:3,children:"Add station"}),e.jsx(d,{variant:"contained",color:"success",onClick:X,children:"Export to Excel"}),e.jsx(d,{variant:"contained",color:"secondary",onClick:Z,children:"Export to PDF"})]})]}),e.jsx(le,{component:te,children:e.jsxs(he,{children:[e.jsx(xe,{children:e.jsxs(B,{children:[e.jsx(p,{align:"center",children:e.jsx("b",{children:"station"})}),e.jsx(p,{align:"center",children:e.jsx("b",{children:"Email"})}),e.jsx(p,{align:"center",children:e.jsx("b",{children:"Status"})}),e.jsx(p,{align:"center",children:e.jsx("b",{children:"Edit"})}),e.jsx(p,{align:"center",children:e.jsx("b",{children:"Delete"})})]})}),e.jsx(pe,{children:u.slice(g*a,g*a+a).map(t=>e.jsxs(B,{children:[e.jsx(p,{align:"center",children:t.name}),e.jsx(p,{align:"center",children:t.address}),e.jsx(p,{align:"center",children:t.status}),e.jsx(p,{align:"center",children:e.jsx(w,{color:"primary",onClick:()=>o(`/master/station/edit/${t.id}`),children:e.jsx(je,{})})}),e.jsx(p,{align:"center",children:e.jsx(w,{color:"error",onClick:()=>J(t),children:e.jsx(re,{})})})]},t.id))})]})}),e.jsx(ge,{component:"div",count:u.length,page:g,rowsPerPage:a,onPageChange:q,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:z}),e.jsx(b,{mt:2}),e.jsxs(be,{open:x,onClose:D,children:[e.jsx(fe,{children:"Confirm Delete"}),e.jsxs(ve,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("b",{children:f==null?void 0:f.name}),"?"]}),e.jsx(j,{fullWidth:!0,label:"Reason for Delete",value:C,onChange:t=>A(t.target.value),margin:"dense"})]}),e.jsxs(Ce,{children:[e.jsx(d,{onClick:D,color:"secondary",children:"Cancel"}),e.jsx(d,{onClick:Y,color:"error",disabled:!C.trim(),children:"Delete"})]})]}),e.jsx(Se,{anchor:"right",open:M,onClose:W,children:e.jsxs(b,{p:3,width:300,display:"flex",flexDirection:"column",gap:2,children:[e.jsx("h3",{children:"Filter stationes"}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(j,{label:"station Name",variant:"outlined",fullWidth:!0,value:S,onChange:t=>R(t.target.value)})}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsxs(ye,{fullWidth:!0,children:[e.jsx(ue,{children:"Status"}),e.jsxs(De,{value:y,onChange:t=>L(t.target.value),label:"Status",children:[e.jsx(k,{value:"Active",children:"Active"}),e.jsx(k,{value:"Inactive",children:"Inactive"}),e.jsx(k,{value:"Cancelled",children:"Cancelled"})]})]})})]}),e.jsxs(b,{mt:2,display:"flex",justifyContent:"space-between",children:[e.jsx(d,{variant:"outlined",color:"secondary",onClick:K,children:"Reset"}),e.jsx(d,{variant:"contained",onClick:H,children:"Apply Filter"})]})]})})]})}const Ie=ie("div")(({theme:o})=>({margin:"30px",[o.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"15px",[o.breakpoints.down("sm")]:{marginBottom:"16px"}}}));function nt(){return e.jsxs(Ie,{children:[e.jsx(b,{className:"breadcrumb",children:e.jsx(se,{routeSegments:[{name:"Master",path:"/master"},{name:"Station",path:"/master/station"}]})}),e.jsx(_e,{spacing:3,children:e.jsx(ne,{children:e.jsxs(ae,{children:[e.jsx(F,{path:"/",element:e.jsx(ke,{})}),e.jsx(F,{path:"add",element:e.jsx(we,{})}),e.jsx(F,{path:"edit/:id",element:e.jsx(Pe,{})})]})})})]})}export{nt as default};
