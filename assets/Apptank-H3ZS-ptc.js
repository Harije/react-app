import{X as F,r as s,j as e,o as m,p as B,x as N,i as Z,Z as Q,B as j,I as S,Y as V,J as ee,K as te,$ as ae,a0 as _,s as ne}from"./index-Bg9Gd-Mk.js";import{G as x,F as se,T as re,D as le,u as D,w as ie,E as oe,a as ce}from"./jspdf.plugin.autotable-C62ySDC9.js";import{T as g,I as de}from"./TextField-DrCr6fLd.js";import{A as me}from"./Autocomplete-BKTD_cRl.js";import{d as he,T as ue,a as O,b as u,c as xe}from"./TableRow-CsweJJjp.js";import{E as pe}from"./Edit-wTQG4UGA.js";import{T as je}from"./TablePagination-CgySaG-p.js";import{D as ge,a as ke,b as fe,c as be}from"./DialogTitle-Cild9m65.js";import{D as ve}from"./Drawer-CrLtX86L.js";import{F as Ce}from"./FormControl-CEF_MUqX.js";import{S as ye}from"./Select-BTOFfGV5.js";import{M as w}from"./MenuItem-BZ0Bes1g.js";import{S as Se}from"./Stack-CbZndAYz.js";import"./useId-CblYdv6j.js";import"./utils-BOIr5jf6.js";import"./useFormControl-BIpaAVtd.js";import"./FormHelperText-cSQn0M_Y.js";import"./Input-BBa8_kQ9.js";import"./Close-BdqVTZbN.js";import"./Popper-CLxdUBp6.js";import"./useControlled-DwjBksQM.js";import"./usePreviousProps-DpKnkwRp.js";import"./Chip-Bxuv7oEj.js";import"./Toolbar-DJcYTIBb.js";import"./Slide-CQBBZdC5.js";import"./dividerClasses-DUtPGmYP.js";const _e=()=>{const r=F(),[l,o]=s.useState({tank_code:"",tank_name:"",tank_email:"",tank_pin_code:"",tank_mobile:"",tank_address:""}),[h,c]=s.useState(""),p=n=>{o({...l,[n.target.name]:n.target.value})},a=async n=>{n.preventDefault(),c("");try{const d=await Z.post("http://localhost/swathi-transport/backend/api/tank/tank-api.php?action=add",l);d.data.error?c(d.data.error):(alert("tank added successfully!"),o({tank_code:"",tank_name:"",tank_email:"",tank_pin_code:"",tank_mobile:"",tank_address:""}),r("/master/tank"))}catch(d){c("Failed to add tank. Please try again."+d)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Add tank"}),h&&e.jsx("p",{style:{color:"red"},children:h}),e.jsxs("form",{onSubmit:a,children:[e.jsxs(x,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(x,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{fullWidth:!0,name:"tank_name",value:l.tank_name,onChange:p,label:"Name",required:!0})}),e.jsx(x,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{fullWidth:!0,name:"tank_capacity",value:l.tank_capacity,onChange:p,label:"Capacity",required:!0})})]}),e.jsxs(m,{color:"primary",variant:"contained",type:"submit",sx:{mr:2},children:[e.jsx(B,{children:"send"}),e.jsx(N,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]}),e.jsx(m,{variant:"contained",color:"secondary",onClick:()=>r("/master/tank"),children:"Back"})]})]})},De=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],we=[{label:"Active",value:"1"},{label:"InActive",value:"2"}],Fe=()=>{const{id:r}=Q(),l=F(),[o,h]=s.useState({username:"",firstName:"",email:"",creditCard:"",mobile:"",password:"",confirmPassword:"",tank_option:null});s.useEffect(()=>{fetch(`/api/tankes/${r}`).then(a=>a.json()).then(a=>{const n=De.find(d=>d.value===a.tank_option);h({...a,tank_option:n||null})})},[r]);const c=a=>{h({...o,[a.target.name]:a.target.value})},p=a=>{var d;a.preventDefault();const n={...o,tank_option:((d=o.tank_option)==null?void 0:d.value)||""};fetch(`/api/tankes/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(()=>l("/master/tank"))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit tank"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs(x,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(x,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{fullWidth:!0,name:"tank_name",value:o.tank_name,onChange:c,label:"Name",required:!0})}),e.jsx(x,{item:!0,md:6,xs:12,lg:3,children:e.jsx(g,{fullWidth:!0,name:"tank_capacity",value:o.tank_capacity,onChange:c,label:"Capacity",required:!0})}),e.jsx(x,{item:!0,md:6,xs:12,lg:3,children:e.jsx(me,{options:we,getOptionLabel:a=>a.label,onChange:(a,n)=>{console.log("Selected option:",n)},renderInput:a=>e.jsx(g,{...a,label:"Select Status",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(m,{variant:"contained",color:"success",type:"submit",sx:{mr:2},children:[e.jsx(B,{children:"forward"}),e.jsx(N,{sx:{pl:1,textTransform:"capitalize"},children:"Update"})]}),e.jsx(m,{variant:"contained",color:"secondary",onClick:()=>l("/master/tank"),children:"Back"})]})]})};function Te(){const r=F(),[l,o]=s.useState([{id:1,name:"Main tank",address:"main@example.com",status:"Active"},{id:2,name:"West tank",address:"west@example.com",status:"Inactive"},{id:3,name:"East tank",address:"east@example.com",status:"Cancelled"},{id:4,name:"North tank",address:"north@example.com",status:"Active"},{id:5,name:"South tank",address:"south@example.com",status:"Inactive"},{id:6,name:"South tank",address:"south@example.com",status:"Inactive"}]),[h,c]=s.useState(l),[p,a]=s.useState(0),[n,d]=s.useState(5),[W,T]=s.useState(!1),[L,P]=s.useState(!1),[k,$]=s.useState(null),[f,E]=s.useState(""),[b,I]=s.useState(""),[v,A]=s.useState("");s.useEffect(()=>{fetch("/api/tankes").then(t=>t.json()).then(t=>{o(t),c(t)}).catch(()=>console.log("Using default data"))},[]);const q=(t,i)=>a(i),M=t=>{d(+t.target.value),a(0)},U=()=>P(!0),R=()=>P(!1),z=t=>{$(t),T(!0)},C=()=>{T(!1),E("")},G=()=>{if(!f.trim())return;console.log(`Deleting tank: ${k.name} for reason: ${f}`);const t=l.filter(i=>i.id!==k.id);o(t),c(t),C()},J=()=>{let t=l;b.trim()&&(t=t.filter(i=>i.name.toLowerCase().includes(b.toLowerCase()))),v&&(t=t.filter(i=>i.status===v)),c(t),R()},Y=()=>{I(""),A(""),c(l)},H=()=>{const t=D.json_to_sheet(h),i=D.book_new();D.book_append_sheet(i,t,"tankes"),ie(i,"tankes.xlsx")},K=()=>{const t=new oe;t.text("tank List",14,10);const i=["tank","Email","Status"],X=h.map(y=>[y.name,y.address,y.status]);ce(t,{head:[i],body:X,startY:20}),t.save("tankes.pdf")};return e.jsxs(j,{children:[e.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(j,{display:"flex",alignItems:"center",gap:1,children:[e.jsx("h2",{children:"tank List"}),e.jsx(S,{color:"primary",onClick:U,children:e.jsx(se,{})})]}),e.jsxs(j,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(m,{variant:"contained",color:"primary",onClick:()=>r("add"),md:6,xs:12,lg:3,children:"Add tank"}),e.jsx(m,{variant:"contained",color:"success",onClick:H,children:"Export to Excel"}),e.jsx(m,{variant:"contained",color:"secondary",onClick:K,children:"Export to PDF"})]})]}),e.jsx(re,{component:V,children:e.jsxs(he,{children:[e.jsx(ue,{children:e.jsxs(O,{children:[e.jsx(u,{align:"center",children:e.jsx("b",{children:"tank"})}),e.jsx(u,{align:"center",children:e.jsx("b",{children:"Email"})}),e.jsx(u,{align:"center",children:e.jsx("b",{children:"Status"})}),e.jsx(u,{align:"center",children:e.jsx("b",{children:"Edit"})}),e.jsx(u,{align:"center",children:e.jsx("b",{children:"Delete"})})]})}),e.jsx(xe,{children:h.slice(p*n,p*n+n).map(t=>e.jsxs(O,{children:[e.jsx(u,{align:"center",children:t.name}),e.jsx(u,{align:"center",children:t.address}),e.jsx(u,{align:"center",children:t.status}),e.jsx(u,{align:"center",children:e.jsx(S,{color:"primary",onClick:()=>r(`/master/tank/edit/${t.id}`),children:e.jsx(pe,{})})}),e.jsx(u,{align:"center",children:e.jsx(S,{color:"error",onClick:()=>z(t),children:e.jsx(le,{})})})]},t.id))})]})}),e.jsx(je,{component:"div",count:h.length,page:p,rowsPerPage:n,onPageChange:q,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:M}),e.jsx(j,{mt:2}),e.jsxs(ge,{open:W,onClose:C,children:[e.jsx(ke,{children:"Confirm Delete"}),e.jsxs(fe,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("b",{children:k==null?void 0:k.name}),"?"]}),e.jsx(g,{fullWidth:!0,label:"Reason for Delete",value:f,onChange:t=>E(t.target.value),margin:"dense"})]}),e.jsxs(be,{children:[e.jsx(m,{onClick:C,color:"secondary",children:"Cancel"}),e.jsx(m,{onClick:G,color:"error",disabled:!f.trim(),children:"Delete"})]})]}),e.jsx(ve,{anchor:"right",open:L,onClose:R,children:e.jsxs(j,{p:3,width:300,display:"flex",flexDirection:"column",gap:2,children:[e.jsx("h3",{children:"Filter tankes"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(g,{label:"tank Name",variant:"outlined",fullWidth:!0,value:b,onChange:t=>I(t.target.value)})}),e.jsx(x,{item:!0,xs:12,md:12,children:e.jsxs(Ce,{fullWidth:!0,children:[e.jsx(de,{children:"Status"}),e.jsxs(ye,{value:v,onChange:t=>A(t.target.value),label:"Status",children:[e.jsx(w,{value:"Active",children:"Active"}),e.jsx(w,{value:"Inactive",children:"Inactive"}),e.jsx(w,{value:"Cancelled",children:"Cancelled"})]})]})})]}),e.jsxs(j,{mt:2,display:"flex",justifyContent:"space-between",children:[e.jsx(m,{variant:"outlined",color:"secondary",onClick:Y,children:"Reset"}),e.jsx(m,{variant:"contained",onClick:J,children:"Apply Filter"})]})]})})]})}const Pe=ne("div")(({theme:r})=>({margin:"30px",[r.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"15px",[r.breakpoints.down("sm")]:{marginBottom:"16px"}}}));function nt(){return e.jsxs(Pe,{children:[e.jsx(j,{className:"breadcrumb",children:e.jsx(ee,{routeSegments:[{name:"Master",path:"/master"},{name:"tank",path:"/master/tank"}]})}),e.jsx(Se,{spacing:3,children:e.jsx(te,{children:e.jsxs(ae,{children:[e.jsx(_,{path:"/",element:e.jsx(Te,{})}),e.jsx(_,{path:"add",element:e.jsx(_e,{})}),e.jsx(_,{path:"edit/:id",element:e.jsx(Fe,{})})]})})})]})}export{nt as default};
