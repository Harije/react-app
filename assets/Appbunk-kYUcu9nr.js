import{X as F,r as c,j as e,o as j,p as N,x as q,i as V,B as k,I as w,Y as ee,Z as te,J as ne,K as le,$ as se,a0 as I,s as ae}from"./index-Bg9Gd-Mk.js";import{G as s,F as oe,T as re,D as ie,u as W,w as de,E as ce,a as ue}from"./jspdf.plugin.autotable-C62ySDC9.js";import{T as a,I as me}from"./TextField-DrCr6fLd.js";import{A as m}from"./Autocomplete-BKTD_cRl.js";import{d as xe,T as he,a as R,b as g,c as pe}from"./TableRow-CsweJJjp.js";import{E as be}from"./Edit-wTQG4UGA.js";import{T as je}from"./TablePagination-CgySaG-p.js";import{D as ge,a as ke,b as fe,c as ve}from"./DialogTitle-Cild9m65.js";import{D as Ce}from"./Drawer-CrLtX86L.js";import{F as Se}from"./FormControl-CEF_MUqX.js";import{S as _e}from"./Select-BTOFfGV5.js";import{M as O}from"./MenuItem-BZ0Bes1g.js";import{S as ye}from"./Stack-CbZndAYz.js";import"./useId-CblYdv6j.js";import"./utils-BOIr5jf6.js";import"./useFormControl-BIpaAVtd.js";import"./FormHelperText-cSQn0M_Y.js";import"./Input-BBa8_kQ9.js";import"./Close-BdqVTZbN.js";import"./Popper-CLxdUBp6.js";import"./useControlled-DwjBksQM.js";import"./usePreviousProps-DpKnkwRp.js";import"./Chip-Bxuv7oEj.js";import"./Toolbar-DJcYTIBb.js";import"./Slide-CQBBZdC5.js";import"./dividerClasses-DUtPGmYP.js";const De=()=>{const x=F(),[d,i]=c.useState({bunk_code:"",bunk_name:"",bunk_email:"",bunk_pin_code:"",bunk_mobile:"",bunk_address:""}),[b,u]=c.useState(""),h=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],t=n=>{i({...d,[n.target.name]:n.target.value})},o=async n=>{n.preventDefault(),u("");try{const r=await V.post("http://localhost/swathi-transport/backend/api/bunk/bunk-api.php?action=add",d);r.data.error?u(r.data.error):(alert("bunk added successfully!"),i({bunk_code:"",bunk_name:"",bunk_email:"",bunk_pin_code:"",bunk_mobile:"",bunk_address:""}),x("/master/bunk"))}catch(r){u("Failed to add bunk. Please try again."+r)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Add bunk"}),b&&e.jsx("p",{style:{color:"red"},children:b}),e.jsxs("form",{onSubmit:o,children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_name",value:d.bunk_name,onChange:t,label:"Name",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_address",value:d.bunk_address,onChange:t,label:"Address",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:h,getOptionLabel:n=>n.label,onChange:(n,r)=>{console.log("Selected option:",r)},renderInput:n=>e.jsx(a,{...n,label:"Select Country",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:h,getOptionLabel:n=>n.label,onChange:(n,r)=>{console.log("Selected option:",r)},renderInput:n=>e.jsx(a,{...n,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:h,getOptionLabel:n=>n.label,onChange:(n,r)=>{console.log("Selected option:",r)},renderInput:n=>e.jsx(a,{...n,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_postal_code",value:d.bunk_address,onChange:t,label:"Postal Code",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_contact_no",value:d.bunk_email,onChange:t,label:"Conatct No"})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,type:"email",name:"bunk_email",value:d.bunk_pin_code,onChange:t,label:"Email",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:h,getOptionLabel:n=>n.label,onChange:(n,r)=>{console.log("Selected option:",r)},renderInput:n=>e.jsx(a,{...n,label:"Select Account type",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:h,getOptionLabel:n=>n.label,onChange:(n,r)=>{console.log("Selected option:",r)},renderInput:n=>e.jsx(a,{...n,label:"Select Account Group ",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:h,getOptionLabel:n=>n.label,onChange:(n,r)=>{console.log("Selected option:",r)},renderInput:n=>e.jsx(a,{...n,label:"Select Sub Group ",variant:"outlined",fullWidth:!0})})})]}),e.jsxs(j,{color:"primary",variant:"contained",type:"submit",sx:{mr:2},children:[e.jsx(N,{children:"send"}),e.jsx(q,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>x("/master/bunk"),children:"Back"})]})]})};function we(){const x=F(),[d,i]=c.useState([{id:1,name:"Main bunk",address:"main@example.com",status:"Active"},{id:2,name:"West bunk",address:"west@example.com",status:"Inactive"},{id:3,name:"East bunk",address:"east@example.com",status:"Cancelled"},{id:4,name:"North bunk",address:"north@example.com",status:"Active"},{id:5,name:"South bunk",address:"south@example.com",status:"Inactive"},{id:6,name:"South bunk",address:"south@example.com",status:"Inactive"}]),[b,u]=c.useState(d),[h,t]=c.useState(0),[o,n]=c.useState(5),[r,P]=c.useState(!1),[G,A]=c.useState(!1),[v,$]=c.useState(null),[C,E]=c.useState(""),[S,L]=c.useState(""),[_,T]=c.useState("");c.useEffect(()=>{fetch("/api/bunkes").then(l=>l.json()).then(l=>{i(l),u(l)}).catch(()=>console.log("Using default data"))},[]);const M=(l,p)=>t(p),U=l=>{n(+l.target.value),t(0)},z=()=>A(!0),B=()=>A(!1),J=l=>{$(l),P(!0)},y=()=>{P(!1),E("")},Y=()=>{if(!C.trim())return;console.log(`Deleting bunk: ${v.name} for reason: ${C}`);const l=d.filter(p=>p.id!==v.id);i(l),u(l),y()},H=()=>{let l=d;S.trim()&&(l=l.filter(p=>p.name.toLowerCase().includes(S.toLowerCase()))),_&&(l=l.filter(p=>p.status===_)),u(l),B()},K=()=>{L(""),T(""),u(d)},X=()=>{const l=W.json_to_sheet(b),p=W.book_new();W.book_append_sheet(p,l,"bunkes"),de(p,"bunkes.xlsx")},Z=()=>{const l=new ce;l.text("bunk List",14,10);const p=["bunk","Email","Status"],Q=b.map(D=>[D.name,D.address,D.status]);ue(l,{head:[p],body:Q,startY:20}),l.save("bunkes.pdf")};return e.jsxs(k,{children:[e.jsxs(k,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(k,{display:"flex",alignItems:"center",gap:1,children:[e.jsx("h2",{children:"bunk List"}),e.jsx(w,{color:"primary",onClick:z,children:e.jsx(oe,{})})]}),e.jsxs(k,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(j,{variant:"contained",color:"primary",onClick:()=>x("add"),md:6,xs:12,lg:3,children:"Add bunk"}),e.jsx(j,{variant:"contained",color:"success",onClick:X,children:"Export to Excel"}),e.jsx(j,{variant:"contained",color:"secondary",onClick:Z,children:"Export to PDF"})]})]}),e.jsx(re,{component:ee,children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(R,{children:[e.jsx(g,{align:"center",children:e.jsx("b",{children:"bunk"})}),e.jsx(g,{align:"center",children:e.jsx("b",{children:"Email"})}),e.jsx(g,{align:"center",children:e.jsx("b",{children:"Status"})}),e.jsx(g,{align:"center",children:e.jsx("b",{children:"Edit"})}),e.jsx(g,{align:"center",children:e.jsx("b",{children:"Delete"})})]})}),e.jsx(pe,{children:b.slice(h*o,h*o+o).map(l=>e.jsxs(R,{children:[e.jsx(g,{align:"center",children:l.name}),e.jsx(g,{align:"center",children:l.address}),e.jsx(g,{align:"center",children:l.status}),e.jsx(g,{align:"center",children:e.jsx(w,{color:"primary",onClick:()=>x(`/master/bunk/edit/${l.id}`),children:e.jsx(be,{})})}),e.jsx(g,{align:"center",children:e.jsx(w,{color:"error",onClick:()=>J(l),children:e.jsx(ie,{})})})]},l.id))})]})}),e.jsx(je,{component:"div",count:b.length,page:h,rowsPerPage:o,onPageChange:M,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:U}),e.jsx(k,{mt:2}),e.jsxs(ge,{open:r,onClose:y,children:[e.jsx(ke,{children:"Confirm Delete"}),e.jsxs(fe,{children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("b",{children:v==null?void 0:v.name}),"?"]}),e.jsx(a,{fullWidth:!0,label:"Reason for Delete",value:C,onChange:l=>E(l.target.value),margin:"dense"})]}),e.jsxs(ve,{children:[e.jsx(j,{onClick:y,color:"secondary",children:"Cancel"}),e.jsx(j,{onClick:Y,color:"error",disabled:!C.trim(),children:"Delete"})]})]}),e.jsx(Ce,{anchor:"right",open:G,onClose:B,children:e.jsxs(k,{p:3,width:300,display:"flex",flexDirection:"column",gap:2,children:[e.jsx("h3",{children:"Filter bunkes"}),e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(a,{label:"bunk Name",variant:"outlined",fullWidth:!0,value:S,onChange:l=>L(l.target.value)})}),e.jsx(s,{item:!0,xs:12,md:12,children:e.jsxs(Se,{fullWidth:!0,children:[e.jsx(me,{children:"Status"}),e.jsxs(_e,{value:_,onChange:l=>T(l.target.value),label:"Status",children:[e.jsx(O,{value:"Active",children:"Active"}),e.jsx(O,{value:"Inactive",children:"Inactive"}),e.jsx(O,{value:"Cancelled",children:"Cancelled"})]})]})})]}),e.jsxs(k,{mt:2,display:"flex",justifyContent:"space-between",children:[e.jsx(j,{variant:"outlined",color:"secondary",onClick:K,children:"Reset"}),e.jsx(j,{variant:"contained",onClick:H,children:"Apply Filter"})]})]})})]})}const f=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Option 3",value:"3"}],Ie=[{label:"Active",value:"1"},{label:"InActive",value:"2"}],We=()=>{const{id:x}=te(),d=F(),[i,b]=c.useState({username:"",firstName:"",email:"",creditCard:"",mobile:"",password:"",confirmPassword:"",bunk_option:null});c.useEffect(()=>{fetch(`/api/bunkes/${x}`).then(t=>t.json()).then(t=>{const o=f.find(n=>n.value===t.bunk_option);b({...t,bunk_option:o||null})})},[x]);const u=t=>{b({...i,[t.target.name]:t.target.value})},h=t=>{var n;t.preventDefault();const o={...i,bunk_option:((n=i.bunk_option)==null?void 0:n.value)||""};fetch(`/api/bunkes/${x}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(()=>d("/master/bunk"))};return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit bunk"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs(s,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_name",value:i.bunk_name,onChange:u,label:"Name",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_address",value:i.bunk_address,onChange:u,label:"Address",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,o)=>{console.log("Selected option:",o)},renderInput:t=>e.jsx(a,{...t,label:"Select Country",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,o)=>{console.log("Selected option:",o)},renderInput:t=>e.jsx(a,{...t,label:"Select State",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,o)=>{console.log("Selected option:",o)},renderInput:t=>e.jsx(a,{...t,label:"Select City",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_postal_code",value:i.bunk_address,onChange:u,label:"Postal Code",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,name:"bunk_contact_no",value:i.bunk_email,onChange:u,label:"Conatct No"})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(a,{fullWidth:!0,type:"email",name:"bunk_email",value:i.bunk_pin_code,onChange:u,label:"Email",required:!0})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,o)=>{console.log("Selected option:",o)},renderInput:t=>e.jsx(a,{...t,label:"Select Account type",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,o)=>{console.log("Selected option:",o)},renderInput:t=>e.jsx(a,{...t,label:"Select Account Group ",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:f,getOptionLabel:t=>t.label,onChange:(t,o)=>{console.log("Selected option:",o)},renderInput:t=>e.jsx(a,{...t,label:"Select Sub Group ",variant:"outlined",fullWidth:!0})})}),e.jsx(s,{item:!0,md:6,xs:12,lg:3,children:e.jsx(m,{options:Ie,getOptionLabel:t=>t.label,value:i.bunk_option,onChange:(t,o)=>b({...i,bunk_option:o}),renderInput:t=>e.jsx(a,{...t,label:"Select Status",variant:"outlined",fullWidth:!0,required:!0})})})]}),e.jsxs(j,{variant:"contained",color:"success",type:"submit",sx:{mr:2},children:[e.jsx(N,{children:"forward"}),e.jsx(q,{sx:{pl:1,textTransform:"capitalize"},children:"Update"})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>d("/master/bunk"),children:"Back"})]})]})},Oe=ae("div")(({theme:x})=>({margin:"30px",[x.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"15px",[x.breakpoints.down("sm")]:{marginBottom:"16px"}}}));function lt(){return e.jsxs(Oe,{children:[e.jsx(k,{className:"breadcrumb",children:e.jsx(ne,{routeSegments:[{name:"Master",path:"/master"},{name:"bunk",path:"/master/bunk"}]})}),e.jsx(ye,{spacing:3,children:e.jsx(le,{children:e.jsxs(se,{children:[e.jsx(I,{path:"/",element:e.jsx(we,{})}),e.jsx(I,{path:"add",element:e.jsx(De,{})}),e.jsx(I,{path:"edit/:id",element:e.jsx(We,{})})]})})})]})}export{lt as default};
